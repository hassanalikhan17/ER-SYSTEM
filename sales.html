<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ERP POS - Sales & Invoicing</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Check if user is logged in
  const session = JSON.parse(localStorage.getItem('um_session_v1'));
  if(!session){
    alert("You must login first!");
    window.location.href = "login.html"; // redirect to login page
  }
</script>

<style>
/* Animated Gradient Background */
body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    background: linear-gradient(-45deg, #ff6ec4, #7873f5, #42e695, #f6d365, #ff9a9e, #fbc2eb);
    background-size: 600% 600%;
    animation: gradientBG 20s ease infinite;
    color: #2c3e50;
}

@keyframes gradientBG {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
}

/* Overlay */
.overlay {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(8px);
    min-height: 100vh;
    padding-bottom: 50px;
}

/* Navbar */
.navbar {
    background: rgba(44,62,80,0.95);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    position: sticky;
    top: 0;
    z-index: 100;
    padding: 15px 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.navbar h1 { margin:0; font-size:26px; flex-basis:100%; text-align:center; }
.nav-links { display:flex; gap:30px; justify-content:center; width:100%; margin-top:10px; }
.nav-links a { color:white; text-decoration:none; font-weight:500; transition:0.3s; }
.nav-links a:hover { color:#2ecc71; }
.nav-toggle { display:none; }
@media(max-width:768px) {
    .nav-links { flex-direction: column; width: 100%; display:none; margin-top:10px; }
    .nav-links.active { display:flex; }
    .nav-toggle { display:block; font-size:28px; cursor:pointer; position:absolute; top:15px; right:20px; }
}

/* Main Container */
.container { max-width:1200px; margin:30px auto; padding:20px; background: rgba(255,255,255,0.95); border-radius:15px; box-shadow:0 8px 25px rgba(0,0,0,0.2); }

/* Typography */
h2 { color:#2c3e50; margin-bottom:15px; border-bottom:2px solid #2c3e50; padding-bottom:5px; }

/* Tables with Animated Rainbow Border */
table {
    width:100%;
    border-collapse: collapse;
    border-radius:10px;
    overflow:hidden;
    margin-bottom:30px;
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    border:5px solid;
    border-image: linear-gradient(45deg, #ff6ec4, #7873f5, #42e695, #f6d365) 1;
    animation: borderGradient 10s linear infinite;
}
@keyframes borderGradient {
    0% {border-image: linear-gradient(45deg, #ff6ec4, #7873f5, #42e695, #f6d365) 1;}
    50% {border-image: linear-gradient(45deg, #f6d365, #ff9a9e, #fbc2eb, #42e695) 1;}
    100% {border-image: linear-gradient(45deg, #ff6ec4, #7873f5, #42e695, #f6d365) 1;}
}
table th, table td { padding:12px; text-align:left; border-bottom:1px solid #ddd; }
table th { background:#34495e; color:white; font-weight:600; }
table tr:hover { background: rgba(46,204,113,0.1); }
table img { width:50px; height:50px; object-fit:cover; border-radius:5px; }

/* Buttons */
.action-btn { padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:600; transition:0.3s; }
.add-cart { background:#27ae60; color:white; }
.add-cart:hover { background:#2ecc71; }
.finalize-btn { background:#27ae60; color:white; width:100%; margin-top:10px; }
.finalize-btn:hover { background:#2ecc71; }
.print-btn { background:#3498db; color:white; width:100%; margin-bottom:5px; }
.print-btn:hover { background:#2980b9; }
.refund-btn { background:#e74c3c; color:white; width:100%; }
.refund-btn:hover { background:#c0392b; }
.payment-select { padding:6px 10px; border-radius:6px; border:1px solid #ccc; }
.low-stock { color:#e67e22; font-weight:bold; }

/* Cart */
.cart { background:white; padding:15px; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1); margin-bottom:30px; }
.cart h3 { margin-top:0; }
.cart-item { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #ddd; }

/* Forms */
form input, form select, form button { padding:10px; margin:5px 0; border-radius:6px; border:1px solid #ccc; width:100%; }
form button { background:#27ae60; color:white; border:none; font-weight:600; cursor:pointer; transition:0.3s; }
form button:hover { background:#2ecc71; }

/* Charts with Animated Rainbow Border */
.chart-container { display:flex; flex-wrap:wrap; gap:20px; margin-bottom:30px; }
.chart-box {
    flex:1; 
    min-width:300px; 
    background:white; 
    padding:15px; 
    border-radius:10px; 
    box-shadow:0 5px 15px rgba(0,0,0,0.1);
    border:5px solid;
    border-image: linear-gradient(60deg, #ff6ec4, #42e695, #7873f5, #f6d365) 1;
    animation: borderGradient 10s linear infinite;
}
.chart-box canvas { box-shadow:0 0 15px rgba(255,255,255,0.5); border-radius:5px; }

/* Footer */
footer {
    background: rgba(44,62,80,0.95);
    color:white;
    padding:40px 20px;
    margin-top:40px;
    border-top:3px solid #2ecc71;
}
footer h3 { margin-bottom:10px; }
footer ul { list-style:none; padding:0; }
footer ul li { margin-bottom:5px; }
footer a { color:white; text-decoration:none; }
footer a:hover { color:#2ecc71; }
footer .footer-container { display:flex; flex-wrap:wrap; justify-content:space-between; gap:20px; max-width:1200px; margin:0 auto; }
footer p { margin:5px 0; }
</style>
</head>
<body>
<div class="overlay">

<nav class="navbar">
<h1>ERP </h1>
<span class="nav-toggle">&#9776;</span>
<div class="nav-links">
<a href="index.html">Dashboard</a>
<a href="home.html">Home</a>
  <a href="invontery.html">Inventory</a>
  <a href="sales.html">Sales</a>
  <a href="hrm.html">HRM</a>
  <a href="contact.html">Contact</a>
</div>
</nav>

<div class="container">
<!-- Charts -->
<h2>Sales Analytics</h2>
<div class="chart-container">
<div class="chart-box"><canvas id="monthlySalesChart" height="150"></canvas></div>
<div class="chart-box"><canvas id="paymentStatusChart" height="150"></canvas></div>
<div class="chart-box"><canvas id="topProductsChart" height="150"></canvas></div>
</div>

<!-- Products Table -->
<h2>Available Products</h2>
<table id="productTable">
<thead>
<tr><th>Image</th><th>Name</th><th>SKU</th><th>Price</th><th>Stock</th><th>Payment</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>

<!-- Add Product Form -->
<h2>Buy Product / Add Custom Product</h2>
<form id="productForm">
<label>Product Name</label>
<input type="text" id="productName" placeholder="Enter product name" required>
<label>SKU</label>
<input type="text" id="productSKU" placeholder="Enter SKU" required>
<label>Price ($)</label>
<input type="number" id="productPrice" placeholder="Enter price" required>
<label>Quantity</label>
<input type="number" id="productStock" placeholder="Enter quantity" required>
<label>Payment Status</label>
<select id="productPayment">
<option value="Pending">Pending</option>
<option value="Paid">Paid</option>
<option value="Overdue">Overdue</option>
</select>
<button type="submit">Add to Cart</button>
</form>

<!-- Cart -->
<div class="cart">
<h3>Current Cart</h3>
<div id="cartItems"></div>
<p><strong>Total: $<span id="cartTotal">0</span></strong></p>
<button class="finalize-btn" onclick="finalizeSale()">Finalize Sale & Generate Invoice</button>
</div>

<!-- Invoices -->
<h2>Sales History / Invoice Management</h2>
<input type="text" id="searchInvoice" placeholder="Search Invoice / Customer" onkeyup="searchInvoice()" style="padding:8px;width:100%;margin-bottom:10px;border-radius:5px;border:1px solid #ccc;">
<table id="invoiceTable">
<thead>
<tr><th>Invoice #</th><th>Date</th><th>Customer</th><th>Total</th><th>Payment</th><th>Action</th></tr>
</thead>
<tbody></tbody>
</table>

<!-- Invoice Display -->
<div id="invoiceDisplay" style="display:none; margin-top:20px; padding:15px; border:1px solid #ccc; border-radius:10px; background:white;">
  <h3>Invoice Details</h3>
  <div id="invoiceContent"></div>
</div>
</div>


<script>
// Navbar toggle
const navToggle=document.querySelector('.nav-toggle');
const navLinks=document.querySelector('.nav-links');
navToggle.addEventListener('click',()=>{navLinks.classList.toggle('active');});

// Products & Cart
let products=[
{name:'Smartphone',sku:'ELEC001',price:500,stock:10,image:'images (1).jpg',payment:'Pending'},
{name:'Laptop',sku:'ELEC002',price:1200,stock:5,image:'images (3).jpg',payment:'Pending'},
{name:'Headphones',sku:'ELEC003',price:80,stock:15,image:'images (4).jpg',payment:'Pending'},
{name:'T-Shirt',sku:'CLO001',price:20,stock:25,image:'tshirts.jpg',payment:'Pending'},
{name:'Watch',sku:'ACC001',price:150,stock:8,image:'images (2).jpg',payment:'Pending'}
];
let cart=[]; let invoices=[];

function renderProducts(){
const tbody=document.querySelector('#productTable tbody'); tbody.innerHTML='';
products.forEach((p,i)=>{
tbody.innerHTML+=`<tr>
<td><img src="${p.image}"></td><td>${p.name}</td><td>${p.sku}</td><td>$${p.price}</td>
<td>${p.stock<=5?'<span class="low-stock">'+p.stock+'</span>':p.stock}</td>
<td><select class="payment-select" onchange="updatePaymentStatus(${i}, this.value)">
<option value="Paid" ${p.payment==='Paid'?'selected':''}>Paid</option>
<option value="Pending" ${p.payment==='Pending'?'selected':''}>Pending</option>
<option value="Overdue" ${p.payment==='Overdue'?'selected':''}>Overdue</option></select></td>
<td><button class="action-btn add-cart" onclick="addToCart(${i})">Add to Cart</button></td>
</tr>`;
});
}

function updatePaymentStatus(i,value){products[i].payment=value;}
function addToCart(i){let p=products[i]; if(p.stock>0){cart.push({...p}); p.stock--; renderCart(); renderProducts();} else alert('Out of stock');}
document.getElementById('productForm').addEventListener('submit',function(e){
e.preventDefault();
let name=document.getElementById('productName').value;
let sku=document.getElementById('productSKU').value;
let price=parseFloat(document.getElementById('productPrice').value);
let stock=parseInt(document.getElementById('productStock').value);
let payment=document.getElementById('productPayment').value;
let customProduct={name,sku,price,stock,image:'https://via.placeholder.com/100x100?text=Custom',payment};
products.push(customProduct); addToCart(products.length-1); this.reset();
});
function renderCart(){
const cartDiv=document.getElementById('cartItems'); cartDiv.innerHTML=''; let total=0;
cart.forEach((item,i)=>{cartDiv.innerHTML+=`<div class="cart-item"><span>${item.name} ($${item.price}) - ${item.payment}</span><button onclick="removeFromCart(${i})">Remove</button></div>`; total+=item.price;});
document.getElementById('cartTotal').innerText=total;
}
function removeFromCart(i){let removed=cart.splice(i,1)[0]; let prod=products.find(p=>p.sku===removed.sku); prod.stock++; renderCart(); renderProducts();}
function finalizeSale(){
if(cart.length===0){alert('Cart empty'); return;}
let invoiceID='INV'+(invoices.length+1).toString().padStart(3,'0');
let date=new Date().toISOString().slice(0,10);
let total=cart.reduce((sum,i)=>sum+i.price,0);
let paymentStatus=cart.every(i=>i.payment==='Paid')?'Paid':'Pending';
invoices.push({id:invoiceID,date:date,customer:'Walk-in',total:total,payment:paymentStatus,items:[...cart]});
alert('Sale finalized! Invoice ID: '+invoiceID); cart=[]; renderCart(); renderInvoices(); updateCharts();
}
function renderInvoices(){
const tbody=document.querySelector('#invoiceTable tbody'); tbody.innerHTML='';
invoices.forEach((inv,i)=>{
tbody.innerHTML+=`<tr><td>${inv.id}</td><td>${inv.date}</td><td>${inv.customer}</td><td>$${inv.total}</td><td>${inv.payment}</td>
<td><button class="action-btn print-btn" onclick="viewInvoice(${i})">View/Print</button>
<button class="action-btn refund-btn" onclick="refundInvoice(${i})">Refund</button></td></tr>`;
});
}
function viewInvoice(i){
  const inv = invoices[i];
  let html = `<p><strong>Invoice ID:</strong> ${inv.id}</p>
              <p><strong>Date:</strong> ${inv.date}</p>
              <p><strong>Customer:</strong> ${inv.customer}</p>
              <table style="width:100%; border-collapse: collapse;">
              <tr><th>Item</th><th>Price</th><th>Payment</th></tr>`;
  inv.items.forEach(it => {
    html += `<tr><td>${it.name}</td><td>$${it.price}</td><td>${it.payment}</td></tr>`;
  });
  html += `</table><p><strong>Total:</strong> $${inv.total}</p>`;
  
  document.getElementById('invoiceContent').innerHTML = html;
  document.getElementById('invoiceDisplay').style.display = 'block';
}
function refundInvoice(i){if(confirm('Refund this invoice?')){invoices.splice(i,1); renderInvoices(); updateCharts();}}
function searchInvoice(){let filter=document.getElementById('searchInvoice').value.toUpperCase();
document.querySelectorAll('#invoiceTable tbody tr').forEach(r=>{r.style.display=r.innerText.toUpperCase().indexOf(filter)>-1?'':'none';});}

// Charts
const monthlySalesCtx=document.getElementById('monthlySalesChart').getContext('2d');
let monthlySalesChart=new Chart(monthlySalesCtx,{type:'line',data:{labels:['Jan','Feb','Mar','Apr','May','Jun'],datasets:[{label:'Monthly Sales ($)',data:[500,1000,750,1200,900,1500],backgroundColor:'rgba(46,204,113,0.2)',borderColor:'#2ecc71',borderWidth:2,fill:true} ]},options:{responsive:true}});

const paymentStatusCtx=document.getElementById('paymentStatusChart').getContext('2d');
let paymentStatusChart=new Chart(paymentStatusCtx,{type:'doughnut',data:{labels:['Paid','Pending','Overdue'],datasets:[{data:[0,0,0],backgroundColor:['#27ae60','#f1c40f','#e74c3c']}]},options:{responsive:true}});

const topProductsCtx=document.getElementById('topProductsChart').getContext('2d');
let topProductsChart=new Chart(topProductsCtx,{type:'bar',data:{labels:products.map(p=>p.name),datasets:[{label:'Stock Quantity',data:products.map(p=>p.stock),backgroundColor:'#3498db'}]},options:{responsive:true,plugins:{legend:{display:false}}}});

function updateCharts(){
let paid=0,pending=0,overdue=0;
invoices.forEach(inv=>{if(inv.payment==='Paid') paid++; else if(inv.payment==='Pending') pending++; else overdue++;});
paymentStatusChart.data.datasets[0].data=[paid,pending,overdue]; paymentStatusChart.update();
topProductsChart.data.datasets[0].data=products.map(p=>p.stock); topProductsChart.update();
}

renderProducts(); renderInvoices(); updateCharts();
</script>
<!-- FOOTER -->
<footer style="background:#2c3e50; color:white; padding:40px 20px; margin-top:50px;">
  <div style="max-width:1100px; margin:auto; display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:30px;">
    
    <!-- About -->
    <div>
      <h3 style="margin-bottom:15px; color:#1abc9c;">About Us</h3>
      <p style="line-height:1.6; color:#bdc3c7;">
        We provide high-quality products and services designed to meet your everyday needs. Your satisfaction is our top priority.
      </p>
    </div>

    <!-- Quick Links -->
    <div>
      <h3 style="margin-bottom:15px; color:#1abc9c;">Quick Links</h3>
      <ul style="list-style:none; padding:0; line-height:2;">
         <li><a href="#home" style="color:white; text-decoration:none;">Home</a></li>
        <li><a href="#invontery" style="color:white; text-decoration:none;">Inventory</a></li>
        <li><a href="#sales" style="color:white; text-decoration:none;">Sales</a></li>
        <li><a href="#hrm" style="color:white; text-decoration:none;">Hrm</a></li>
         <li><a href="#contact" style="color:white; text-decoration:none;">Contact</a></li>
      </ul>
    </div>

    <!-- Contact Info -->
    <div>
      <h3 style="margin-bottom:15px; color:#1abc9c;">Contact Us</h3>
      <p style="margin:5px 0;">📍 123 Business Street, City</p>
      <p style="margin:5px 0;">📞 +123 456 7890</p>
      <p style="margin:5px 0;">✉ support@company.com</p>
    </div>
  </div>

  <!-- Bottom -->
  <div style="text-align:center; margin-top:30px; font-size:14px; color:#bdc3c7;">
    © 2025 Your Company Name. All Rights Reserved.
  </div>
</footer>

</body>
</html>
